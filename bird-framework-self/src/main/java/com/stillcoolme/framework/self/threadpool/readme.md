### 自定义线程池
原以为线程池还挺简单（平时常用，也分析过原理），这次是想自己动手写一个线程池来更加深入的了解它；但在动手写的过程中落地到细节时发现并没想的那么容易。

我觉得大部分人直接去看 java.util.concurrent.ThreadPoolExecutor 的源码时都是看一个大概，

因为其中涉及到了许多细节处理，还有部分 AQS 的内容，所以想要理清楚具体细节并不是那么容易。

与其挨个分析源码不如自己实现一个简版，当然简版并不意味着功能缺失，需要保证核心逻辑一致。

所以，自己动手写一个五脏俱全的线程池，同时会了解到线程池的工作原理，以及如何在工作中合理的利用线程池。

### 是什么

线程池就是个调度任务的工具，线程池的线程封装成 Worker对象 来调度任务， Worker对象也是实现Runnable接口的线程。

### 主要逻辑
```
minSize 最小线程数，等效于 ThreadPool 中的核心线程数
maxSize 最大线程数
keepAliveTime 线程保活时间
workQueue 阻塞队列
notify 通知接口
```

minSize 就是线程池的目标大小，即在没有任务执行时的大小。

超过 minSize 的任务会放到队列中，当队列也满了的时候才会创建超出 minSize 数量的线程，上限是 maxSize。

maxSize 表示可同时活动的线程数量。

如果某个线程的空闲时间超过了存活时间会被标记为“可回收”，并且当线程池的当前大小超过了 minSize，就会将终止该线程。



### 参考
* [讲解线程池的一篇干货，很干很干！
](https://mp.weixin.qq.com/s/lpf2UKzxe9aS99oVIdc5pw)
* [想深入了解线程池底层原理？那就动手写一个吧！](https://mp.weixin.qq.com/s/YnxNCTBBogOnrV813rgXvQ)